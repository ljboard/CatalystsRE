html
  head
    title="Catalyst Efficiency"
    style 
      include styles.css
    link(rel="stylesheet",
         href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css",
         integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u",
         crossorigin="anonymous")

body
  head
    script(src="https://cdn.plot.ly/plotly-latest.min.js")
  
  h1#title=graph_title

  div
    div#popup.hidden

    div#left-container
      div.box
        h3="Legend"
        div.inner-box
          div(style="height: 30px; margin: 0")
            div.circle.red-circle
            ="polycrystalline"
          div(style="height: 30px; margin: 0")
            div.circle.orange-circle
            ="(111) surface"
          div(style="height: 30px; margin: 0")
            div.circle.yellow-circle
            ="other surface orientation"
      div.box
        h4
          span.glyphicon.glyphicon-triangle-bottom.pull-left#toggle-button
          //- add a delta
          span(
            style="font-family: monospace; cursor: pointer; user-select: none"
            onclick="document.getElementsByClassName('inner-box')[1].classList.toggle('hidden');document.getElementById('toggle-button').classList.toggle('glyphicon-triangle-bottom'); document.getElementById('toggle-button').classList.toggle('glyphicon-triangle-top');"
          )=equation
        div.inner-box.hidden
          form#equation_form.form-horizontal(action="/graph", method="GET")
            div.row(style="text-align: center")
              div.col-md-5
                h3="dE"
              div.col-md-7
                h3="coefficient"
            each parameter, i in parameters
              div.form-group
                label.col-md-5.control-label(for="coefficient_input_"+i)=parameter.name
                div.col-md-7
                  input.form-control(type="number", name=parameter.name, value=parameter.value)
            input.btn.btn-block(type="submit", value="UPDATE FORMULA")
          
    div#middle-container
      div#graph(style="width:100%;height:650px;")

    div#right-container
      div.box
        h3="Filter By"
        div.inner-box
          form(action="/graph", method="GET")
            div.filter_option
              input#formula(type="checkbox", name="formula", checked=filters["formula"])
              ="    chemical formula        "
              input#formula_input.hidden(type="text", name="chem_formula_input")
            div.filter_option
              input#mpid(type="checkbox", name="mpid", checked=filters["mpid"])          
              ="    MPID"
              input#mpid_input.hidden(type="text", name="mpid_input")
            div.filter_option
              input#miller(type="checkbox", name="miller", checked=filters["miller"])
              ="    Miller Index"
              input#miller_input.hidden(type="text", name="miller_input")
            div.filter_option
              input#top(type="checkbox", name="top", checked=filters["top"])
              ="    Top"
            div.filter_option
              input#coordination(type="checkbox", name="coordination", checked=filters["coordination"])
              ="    Coordination"
              input#coordination_input.hidden(type="text", name="coordination_input")
            div(style="height: 20px")
            div.filter_option
              input#next_nearest_coord(type="checkbox", name="next_nearest_coord", checked=filters["next_nearest_coord"])
              ="    Next nearest coordinate"
              input#next_nearest_coord_input.hidden(type="text", name="next_nearest_coord_input")
            div.filter_option
              input#neighbor_coord(type="checkbox", name="neighbor_coord", checked=filters["neighbor_coord"])
              ="    Neighbor coordination"
              input#neighbor_coord_input.hidden(type="text", name="neighbor_coord_input")
            div.filter_option
              input#fmax(type="checkbox", name="fmax", checked=filters["fmax"])
              ="    Fmax"
              input#fmax_input.hidden(type="text", name="fmax_input")

  script(src="graph.js" data-input_var=data)
